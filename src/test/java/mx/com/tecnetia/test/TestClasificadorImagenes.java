package mx.com.tecnetia.test;

import java.util.Base64;

import org.junit.jupiter.api.Test;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.web.client.RestTemplate;

import mx.com.tecnetia.marcoproyectoseguridad.dto.reciclaje.RequestValidaProductoFotoDTO;
import mx.com.tecnetia.marcoproyectoseguridad.dto.reciclaje.ResponseValidaProductoFotoDTO;

public class TestClasificadorImagenes {

	//private String image = "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";
	//private String image ="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";
	private String image="/9j/4AAQSkZJRgABAQAAkACQAAD/4QCSRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAOShgAHAAAAEgAAAHigAgAEAAAAAQAAABSgAwAEAAAAAQAAABgAAAAAQVNDSUkAAABTY3JlZW5zaG90/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/iAhhJQ0NfUFJPRklMRQABAQAAAghhcHBsBAAAAG1udHJSR0IgWFlaIAfoAAwAAQAJABkAFWFjc3BBUFBMAAAAAEFQUEwAAAAAAAAAAAAAAAAAAAAAAAD21gABAAAAANMtYXBwbK5FzRhlIzM2XmL6WWKC7fIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACmRlc2MAAAD8AAAAMGNwcnQAAAEsAAAAUHd0cHQAAAF8AAAAFHJYWVoAAAGQAAAAFGdYWVoAAAGkAAAAFGJYWVoAAAG4AAAAFHJUUkMAAAHMAAAAEGNoYWQAAAHcAAAALGJUUkMAAAHMAAAAEGdUUkMAAAHMAAAAEG1sdWMAAAAAAAAAAQAAAAxlblVTAAAAFAAAABwAVwBIADMAMgBVAFgAOQAwADEAOW1sdWMAAAAAAAAAAQAAAAxlblVTAAAANAAAABwAQwBvAHAAeQByAGkAZwBoAHQAIABBAHAAcABsAGUAIABJAG4AYwAuACwAIAAyADAAMgA0WFlaIAAAAAAAAPbWAAEAAAAA0y1YWVogAAAAAAAAccAAADmKAAABZ1hZWiAAAAAAAABhIwAAueYAABP2WFlaIAAAAAAAACPyAAAMkAAAvdBwYXJhAAAAAAAAAAAAAfYEc2YzMgAAAAAAAQxyAAAF+P//8x0AAAe6AAD9cv//+53///2kAAAD2QAAwHH/wAARCAAYABQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwAcHBwcHBwvHBwvQy8vL0NbQ0NDQ1tyW1tbW1tyinJycnJycoqKioqKioqKpaWlpaWlwcHBwcHZ2dnZ2dnZ2dnZ/9sAQwEhIyM3MzdeMzNe4pp+muLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi/90ABAAC/9oADAMBAAIRAxEAPwDpKxNS/wBev+6P5mtusTUv9ev+6P5moqbEz2M+iiiucyP/0OkrE1L/AF6/7o/ma26xNS/16/7o/maipsTPYz6KKK5zI//Z";
	@Test
	public void clasificadorImagenesRest(){
		String urlEndpoint = "http://18.220.46.166:8080/classifier/api/clasificador/imagenes/";
		byte[] imageBase64 = Base64.getDecoder().decode(image);
		Long idProductoReciclado = 175L;
		String barcode = "17t6760942526"; 
		String label = "coca cola";
		boolean productoValido = false;
		ResponseValidaProductoFotoDTO reponseData = null;	
		
    	RequestValidaProductoFotoDTO requestDTO = new RequestValidaProductoFotoDTO();
    	requestDTO.setIdProductoReciclado(idProductoReciclado);
    	requestDTO.setClase(barcode);
    	requestDTO.setLabel(label);
		requestDTO.setImageBase64(image);
//    	requestDTO.setImageBase64(imageBase64);
    	
        try {
	        var restTemplate = new RestTemplate();
	        var headers = new HttpHeaders();
	        headers.setContentType(MediaType.APPLICATION_JSON);
	        var requestEntity = new HttpEntity<>(requestDTO, headers);
	        reponseData = restTemplate.postForObject(urlEndpoint, requestEntity,ResponseValidaProductoFotoDTO.class);
	        productoValido = reponseData.getData().isUserResponse();
	        System.out.println("reponseData: " + reponseData.toString());
	        System.out.println("productoValido: " + productoValido);	        
        }catch (Exception e) {
			e.printStackTrace();
		}        
        
    }
}
